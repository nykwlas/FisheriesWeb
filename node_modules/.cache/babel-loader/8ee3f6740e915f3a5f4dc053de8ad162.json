{"ast":null,"code":"import _classCallCheck from\"/home/nicolas/FisheriesWeb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/nicolas/FisheriesWeb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/nicolas/FisheriesWeb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/nicolas/FisheriesWeb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{connect}from'react-redux';import{compose}from'recompose';import{withFirebase}from'../Firebase';var needsEmailVerification=function needsEmailVerification(authUser){return authUser&&!authUser.emailVerified&&authUser.providerData.map(function(provider){return provider.providerId;}).includes('password');};var withEmailVerification=function withEmailVerification(Component){var WithEmailVerification=/*#__PURE__*/function(_React$Component){_inherits(WithEmailVerification,_React$Component);var _super=_createSuper(WithEmailVerification);function WithEmailVerification(props){var _this;_classCallCheck(this,WithEmailVerification);_this=_super.call(this,props);_this.onSendEmailVerification=function(){_this.props.firebase.doSendEmailVerification().then(function(){return _this.setState({isSent:true});});};_this.state={isSent:false};return _this;}_createClass(WithEmailVerification,[{key:\"render\",value:function render(){return needsEmailVerification(this.props.authUser)?/*#__PURE__*/React.createElement(\"div\",null,this.state.isSent?/*#__PURE__*/React.createElement(\"p\",null,\"E-Mail confirmation sent: Check you E-Mails (Spam folder included) for a confirmation E-Mail. Refresh this page once you confirmed your E-Mail.\"):/*#__PURE__*/React.createElement(\"p\",null,\"Verify your E-Mail: Check you E-Mails (Spam folder included) for a confirmation E-Mail or send another confirmation E-Mail.\"),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",onClick:this.onSendEmailVerification,disabled:this.state.isSent},\"Send confirmation E-Mail\")):/*#__PURE__*/React.createElement(Component,this.props);}}]);return WithEmailVerification;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{authUser:state.sessionState.authUser};};return compose(withFirebase,connect(mapStateToProps))(WithEmailVerification);};export default withEmailVerification;","map":{"version":3,"sources":["/home/nicolas/FisheriesWeb/src/components/Session/withEmailVerification.js"],"names":["React","connect","compose","withFirebase","needsEmailVerification","authUser","emailVerified","providerData","map","provider","providerId","includes","withEmailVerification","Component","WithEmailVerification","props","onSendEmailVerification","firebase","doSendEmailVerification","then","setState","isSent","state","mapStateToProps","sessionState"],"mappings":"ojBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAASC,OAAT,KAAwB,WAAxB,CAEA,OAASC,YAAT,KAA6B,aAA7B,CAEA,GAAMC,CAAAA,sBAAsB,CAAG,QAAzBA,CAAAA,sBAAyB,CAAAC,QAAQ,QACrCA,CAAAA,QAAQ,EACR,CAACA,QAAQ,CAACC,aADV,EAEAD,QAAQ,CAACE,YAAT,CACGC,GADH,CACO,SAAAC,QAAQ,QAAIA,CAAAA,QAAQ,CAACC,UAAb,EADf,EAEGC,QAFH,CAEY,UAFZ,CAHqC,EAAvC,CAOA,GAAMC,CAAAA,qBAAqB,CAAG,QAAxBA,CAAAA,qBAAwB,CAAAC,SAAS,CAAI,IACnCC,CAAAA,qBADmC,0IAEvC,+BAAYC,KAAZ,CAAmB,uDACjB,uBAAMA,KAAN,EADiB,MAMnBC,uBANmB,CAMO,UAAM,CAC9B,MAAKD,KAAL,CAAWE,QAAX,CACGC,uBADH,GAEGC,IAFH,CAEQ,iBAAM,OAAKC,QAAL,CAAc,CAAEC,MAAM,CAAE,IAAV,CAAd,CAAN,EAFR,EAGD,CAVkB,CAGjB,MAAKC,KAAL,CAAa,CAAED,MAAM,CAAE,KAAV,CAAb,CAHiB,aAIlB,CANsC,yEAc9B,CACP,MAAOjB,CAAAA,sBAAsB,CAAC,KAAKW,KAAL,CAAWV,QAAZ,CAAtB,cACL,+BACG,KAAKiB,KAAL,CAAWD,MAAX,cACC,+KADD,cAOC,2JARJ,cAeE,8BACE,IAAI,CAAC,QADP,CAEE,OAAO,CAAE,KAAKL,uBAFhB,CAGE,QAAQ,CAAE,KAAKM,KAAL,CAAWD,MAHvB,6BAfF,CADK,cAyBL,oBAAC,SAAD,CAAe,KAAKN,KAApB,CAzBF,CA2BD,CA1CsC,mCACLf,KAAK,CAACa,SADD,EA6CzC,GAAMU,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAAAD,KAAK,QAAK,CAChCjB,QAAQ,CAAEiB,KAAK,CAACE,YAAN,CAAmBnB,QADG,CAAL,EAA7B,CAIA,MAAOH,CAAAA,OAAO,CACZC,YADY,CAEZF,OAAO,CAACsB,eAAD,CAFK,CAAP,CAGLT,qBAHK,CAAP,CAID,CArDD,CAuDA,cAAeF,CAAAA,qBAAf","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport { compose } from 'recompose';\n\nimport { withFirebase } from '../Firebase';\n\nconst needsEmailVerification = authUser =>\n  authUser &&\n  !authUser.emailVerified &&\n  authUser.providerData\n    .map(provider => provider.providerId)\n    .includes('password');\n\nconst withEmailVerification = Component => {\n  class WithEmailVerification extends React.Component {\n    constructor(props) {\n      super(props);\n\n      this.state = { isSent: false };\n    }\n\n    onSendEmailVerification = () => {\n      this.props.firebase\n        .doSendEmailVerification()\n        .then(() => this.setState({ isSent: true }));\n    };\n\n    render() {\n      return needsEmailVerification(this.props.authUser) ? (\n        <div>\n          {this.state.isSent ? (\n            <p>\n              E-Mail confirmation sent: Check you E-Mails (Spam folder\n              included) for a confirmation E-Mail. Refresh this page\n              once you confirmed your E-Mail.\n            </p>\n          ) : (\n            <p>\n              Verify your E-Mail: Check you E-Mails (Spam folder\n              included) for a confirmation E-Mail or send another\n              confirmation E-Mail.\n            </p>\n          )}\n\n          <button\n            type=\"button\"\n            onClick={this.onSendEmailVerification}\n            disabled={this.state.isSent}\n          >\n            Send confirmation E-Mail\n          </button>\n        </div>\n      ) : (\n        <Component {...this.props} />\n      );\n    }\n  }\n\n  const mapStateToProps = state => ({\n    authUser: state.sessionState.authUser,\n  });\n\n  return compose(\n    withFirebase,\n    connect(mapStateToProps),\n  )(WithEmailVerification);\n};\n\nexport default withEmailVerification;\n"]},"metadata":{},"sourceType":"module"}