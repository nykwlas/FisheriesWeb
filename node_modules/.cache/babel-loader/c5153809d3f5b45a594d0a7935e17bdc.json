{"ast":null,"code":"var _jsxFileName = \"/home/nicolas/FisheriesWeb/src/components/Session/withEmailVerification.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { compose } from 'recompose';\nimport { withFirebase } from '../Firebase';\n\nconst needsEmailVerification = authUser => authUser && !authUser.emailVerified && authUser.providerData.map(provider => provider.providerId).includes('password');\n\nconst withEmailVerification = Component => {\n  class WithEmailVerification extends React.Component {\n    constructor(props) {\n      super(props);\n\n      this.onSendEmailVerification = () => {\n        this.props.firebase.doSendEmailVerification().then(() => this.setState({\n          isSent: true\n        }));\n      };\n\n      this.state = {\n        isSent: false\n      };\n    }\n\n    render() {\n      return needsEmailVerification(this.props.authUser) ? /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 30,\n          columnNumber: 9\n        }\n      }, this.state.isSent ? /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 32,\n          columnNumber: 13\n        }\n      }, \"E-Mail confirmation sent: Check you E-Mails (Spam folder included) for a confirmation E-Mail. Refresh this page once you confirmed your E-Mail.\") : /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 38,\n          columnNumber: 13\n        }\n      }, \"Verify your E-Mail: Check you E-Mails (Spam folder included) for a confirmation E-Mail or send another confirmation E-Mail.\"), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        onClick: this.onSendEmailVerification,\n        disabled: this.state.isSent,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 11\n        }\n      }, \"Send confirmation E-Mail\")) : /*#__PURE__*/React.createElement(Component, Object.assign({}, this.props, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 9\n        }\n      }));\n    }\n\n  }\n\n  const mapStateToProps = state => ({\n    authUser: state.sessionState.authUser\n  });\n\n  return compose(withFirebase, connect(mapStateToProps))(WithEmailVerification);\n};\n\nexport default withEmailVerification;","map":{"version":3,"sources":["/home/nicolas/FisheriesWeb/src/components/Session/withEmailVerification.js"],"names":["React","connect","compose","withFirebase","needsEmailVerification","authUser","emailVerified","providerData","map","provider","providerId","includes","withEmailVerification","Component","WithEmailVerification","constructor","props","onSendEmailVerification","firebase","doSendEmailVerification","then","setState","isSent","state","render","mapStateToProps","sessionState"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,OAAT,QAAwB,WAAxB;AAEA,SAASC,YAAT,QAA6B,aAA7B;;AAEA,MAAMC,sBAAsB,GAAGC,QAAQ,IACrCA,QAAQ,IACR,CAACA,QAAQ,CAACC,aADV,IAEAD,QAAQ,CAACE,YAAT,CACGC,GADH,CACOC,QAAQ,IAAIA,QAAQ,CAACC,UAD5B,EAEGC,QAFH,CAEY,UAFZ,CAHF;;AAOA,MAAMC,qBAAqB,GAAGC,SAAS,IAAI;AACzC,QAAMC,qBAAN,SAAoCd,KAAK,CAACa,SAA1C,CAAoD;AAClDE,IAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,YAAMA,KAAN;;AADiB,WAMnBC,uBANmB,GAMO,MAAM;AAC9B,aAAKD,KAAL,CAAWE,QAAX,CACGC,uBADH,GAEGC,IAFH,CAEQ,MAAM,KAAKC,QAAL,CAAc;AAAEC,UAAAA,MAAM,EAAE;AAAV,SAAd,CAFd;AAGD,OAVkB;;AAGjB,WAAKC,KAAL,GAAa;AAAED,QAAAA,MAAM,EAAE;AAAV,OAAb;AACD;;AAQDE,IAAAA,MAAM,GAAG;AACP,aAAOpB,sBAAsB,CAAC,KAAKY,KAAL,CAAWX,QAAZ,CAAtB,gBACL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,KAAKkB,KAAL,CAAWD,MAAX,gBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2JADD,gBAOC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uIARJ,eAeE;AACE,QAAA,IAAI,EAAC,QADP;AAEE,QAAA,OAAO,EAAE,KAAKL,uBAFhB;AAGE,QAAA,QAAQ,EAAE,KAAKM,KAAL,CAAWD,MAHvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oCAfF,CADK,gBAyBL,oBAAC,SAAD,oBAAe,KAAKN,KAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAzBF;AA2BD;;AAzCiD;;AA4CpD,QAAMS,eAAe,GAAGF,KAAK,KAAK;AAChClB,IAAAA,QAAQ,EAAEkB,KAAK,CAACG,YAAN,CAAmBrB;AADG,GAAL,CAA7B;;AAIA,SAAOH,OAAO,CACZC,YADY,EAEZF,OAAO,CAACwB,eAAD,CAFK,CAAP,CAGLX,qBAHK,CAAP;AAID,CArDD;;AAuDA,eAAeF,qBAAf","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport { compose } from 'recompose';\n\nimport { withFirebase } from '../Firebase';\n\nconst needsEmailVerification = authUser =>\n  authUser &&\n  !authUser.emailVerified &&\n  authUser.providerData\n    .map(provider => provider.providerId)\n    .includes('password');\n\nconst withEmailVerification = Component => {\n  class WithEmailVerification extends React.Component {\n    constructor(props) {\n      super(props);\n\n      this.state = { isSent: false };\n    }\n\n    onSendEmailVerification = () => {\n      this.props.firebase\n        .doSendEmailVerification()\n        .then(() => this.setState({ isSent: true }));\n    };\n\n    render() {\n      return needsEmailVerification(this.props.authUser) ? (\n        <div>\n          {this.state.isSent ? (\n            <p>\n              E-Mail confirmation sent: Check you E-Mails (Spam folder\n              included) for a confirmation E-Mail. Refresh this page\n              once you confirmed your E-Mail.\n            </p>\n          ) : (\n            <p>\n              Verify your E-Mail: Check you E-Mails (Spam folder\n              included) for a confirmation E-Mail or send another\n              confirmation E-Mail.\n            </p>\n          )}\n\n          <button\n            type=\"button\"\n            onClick={this.onSendEmailVerification}\n            disabled={this.state.isSent}\n          >\n            Send confirmation E-Mail\n          </button>\n        </div>\n      ) : (\n        <Component {...this.props} />\n      );\n    }\n  }\n\n  const mapStateToProps = state => ({\n    authUser: state.sessionState.authUser,\n  });\n\n  return compose(\n    withFirebase,\n    connect(mapStateToProps),\n  )(WithEmailVerification);\n};\n\nexport default withEmailVerification;\n"]},"metadata":{},"sourceType":"module"}