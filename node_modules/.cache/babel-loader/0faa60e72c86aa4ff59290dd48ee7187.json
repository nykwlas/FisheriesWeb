{"ast":null,"code":"import _classCallCheck from\"/home/nicolas/FisheriesWeb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/nicolas/FisheriesWeb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/nicolas/FisheriesWeb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/nicolas/FisheriesWeb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{connect}from'react-redux';import{compose}from'recompose';import{withFirebase}from'../Firebase';var withAuthentication=function withAuthentication(Component){var WithAuthentication=/*#__PURE__*/function(_React$Component){_inherits(WithAuthentication,_React$Component);var _super=_createSuper(WithAuthentication);function WithAuthentication(props){var _this;_classCallCheck(this,WithAuthentication);_this=_super.call(this,props);_this.props.onSetAuthUser(JSON.parse(localStorage.getItem('authUser')));return _this;}_createClass(WithAuthentication,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.listener=this.props.firebase.onAuthUserListener(function(authUser){localStorage.setItem('authUser',JSON.stringify(authUser));_this2.props.onSetAuthUser(authUser);},function(){localStorage.removeItem('authUser');_this2.props.onSetAuthUser(null);});}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.listener();}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(Component,this.props);}}]);return WithAuthentication;}(React.Component);var mapDispatchToProps=function mapDispatchToProps(dispatch){return{onSetAuthUser:function onSetAuthUser(authUser){return dispatch({type:'AUTH_USER_SET',authUser:authUser});}};};return compose(withFirebase,connect(null,mapDispatchToProps))(WithAuthentication);};export default withAuthentication;","map":{"version":3,"sources":["/home/nicolas/FisheriesWeb/src/components/Session/withAuthentication.js"],"names":["React","connect","compose","withFirebase","withAuthentication","Component","WithAuthentication","props","onSetAuthUser","JSON","parse","localStorage","getItem","listener","firebase","onAuthUserListener","authUser","setItem","stringify","removeItem","mapDispatchToProps","dispatch","type"],"mappings":"ojBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAASC,OAAT,KAAwB,WAAxB,CAEA,OAASC,YAAT,KAA6B,aAA7B,CAEA,GAAMC,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAAAC,SAAS,CAAI,IAChCC,CAAAA,kBADgC,oIAEpC,4BAAYC,KAAZ,CAAmB,oDACjB,uBAAMA,KAAN,EAEA,MAAKA,KAAL,CAAWC,aAAX,CACEC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAX,CADF,EAHiB,aAMlB,CARmC,4FAUhB,iBAClB,KAAKC,QAAL,CAAgB,KAAKN,KAAL,CAAWO,QAAX,CAAoBC,kBAApB,CACd,SAAAC,QAAQ,CAAI,CACVL,YAAY,CAACM,OAAb,CAAqB,UAArB,CAAiCR,IAAI,CAACS,SAAL,CAAeF,QAAf,CAAjC,EACA,MAAI,CAACT,KAAL,CAAWC,aAAX,CAAyBQ,QAAzB,EACD,CAJa,CAKd,UAAM,CACJL,YAAY,CAACQ,UAAb,CAAwB,UAAxB,EACA,MAAI,CAACZ,KAAL,CAAWC,aAAX,CAAyB,IAAzB,EACD,CARa,CAAhB,CAUD,CArBmC,mEAuBb,CACrB,KAAKK,QAAL,GACD,CAzBmC,uCA2B3B,CACP,mBAAO,oBAAC,SAAD,CAAe,KAAKN,KAApB,CAAP,CACD,CA7BmC,gCACLP,KAAK,CAACK,SADD,EAgCtC,GAAMe,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAAAC,QAAQ,QAAK,CACtCb,aAAa,CAAE,uBAAAQ,QAAQ,QACrBK,CAAAA,QAAQ,CAAC,CAAEC,IAAI,CAAE,eAAR,CAAyBN,QAAQ,CAARA,QAAzB,CAAD,CADa,EADe,CAAL,EAAnC,CAKA,MAAOd,CAAAA,OAAO,CACZC,YADY,CAEZF,OAAO,CACL,IADK,CAELmB,kBAFK,CAFK,CAAP,CAMLd,kBANK,CAAP,CAOD,CA5CD,CA8CA,cAAeF,CAAAA,kBAAf","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport { compose } from 'recompose';\n\nimport { withFirebase } from '../Firebase';\n\nconst withAuthentication = Component => {\n  class WithAuthentication extends React.Component {\n    constructor(props) {\n      super(props);\n\n      this.props.onSetAuthUser(\n        JSON.parse(localStorage.getItem('authUser')),\n      );\n    }\n\n    componentDidMount() {\n      this.listener = this.props.firebase.onAuthUserListener(\n        authUser => {\n          localStorage.setItem('authUser', JSON.stringify(authUser));\n          this.props.onSetAuthUser(authUser);\n        },\n        () => {\n          localStorage.removeItem('authUser');\n          this.props.onSetAuthUser(null);\n        },\n      );\n    }\n\n    componentWillUnmount() {\n      this.listener();\n    }\n\n    render() {\n      return <Component {...this.props} />;\n    }\n  }\n\n  const mapDispatchToProps = dispatch => ({\n    onSetAuthUser: authUser =>\n      dispatch({ type: 'AUTH_USER_SET', authUser }),\n  });\n\n  return compose(\n    withFirebase,\n    connect(\n      null,\n      mapDispatchToProps,\n    ),\n  )(WithAuthentication);\n};\n\nexport default withAuthentication;\n"]},"metadata":{},"sourceType":"module"}