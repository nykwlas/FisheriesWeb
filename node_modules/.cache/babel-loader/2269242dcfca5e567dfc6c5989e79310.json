{"ast":null,"code":"var _jsxFileName = \"/home/nicolas/FisheriesWeb/src/components/SignIn/index.js\";\nimport React, { Component } from \"react\";\nimport { withRouter, Link } from \"react-router-dom\";\nimport { compose } from \"recompose\";\nimport { MDBContainer, MDBRow, MDBCol, MDBCard, MDBCardBody, MDBInput, MDBBtn, MDBIcon, MDBModalFooter } from \"mdbreact\";\nimport { withFirebase } from \"../Firebase\";\nimport * as ROUTES from \"../../constants/routes\";\n\nconst SignInPage = () =>\n/*#__PURE__*/\n// <div className=\"d-flex justify-content-start\">\nReact.createElement(SignInForm, {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 21,\n    columnNumber: 5\n  }\n}) // </div>\n;\n\nconst INITIAL_STATE = {\n  email: \"\",\n  password: \"\",\n  error: null,\n  errorFb: null,\n  errorGoogle: null,\n  errorTwitter: null\n};\nconst ERROR_CODE_ACCOUNT_EXISTS = \"auth/account-exists-with-different-credential\";\nconst ERROR_MSG_ACCOUNT_EXISTS = `\n  An account with an E-Mail address to\n  this social account already exists. Try to login from\n  this account instead and associate your social accounts on\n  your personal account page.\n`;\n\nclass SignInFormBase extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onSubmit = event => {\n      const {\n        email,\n        password\n      } = this.state;\n      this.props.firebase.doSignInWithEmailAndPassword(email, password).then(() => {\n        this.setState({ ...INITIAL_STATE\n        });\n        this.props.history.push(ROUTES.HOME);\n      }).catch(error => {\n        this.setState({\n          error\n        });\n      });\n      event.preventDefault();\n    };\n\n    this.onSubmitGoogle = event => {\n      this.props.firebase.doSignInWithGoogle().then(socialAuthUser => {\n        // Create a user in your Firebase Realtime Database too\n        return this.props.firebase.user(socialAuthUser.user.uid).set({\n          username: socialAuthUser.user.displayName,\n          email: socialAuthUser.user.email,\n          roles: {}\n        });\n      }).then(() => {\n        this.setState({\n          errorGoogle: null\n        });\n        this.props.history.push(ROUTES.HOME);\n      }).catch(error => {\n        if (error.code === ERROR_CODE_ACCOUNT_EXISTS) {\n          error.message = ERROR_MSG_ACCOUNT_EXISTS;\n        }\n\n        this.setState({\n          error\n        });\n      });\n      event.preventDefault();\n    };\n\n    this.onSubmitFb = event => {\n      this.props.firebase.doSignInWithFacebook().then(socialAuthUser => {\n        // Create a user in your Firebase Realtime Database too\n        return this.props.firebase.user(socialAuthUser.user.uid).set({\n          username: socialAuthUser.additionalUserInfo.profile.name,\n          email: socialAuthUser.additionalUserInfo.profile.email,\n          roles: {}\n        });\n      }).then(() => {\n        this.setState({\n          error: null\n        });\n        this.props.history.push(ROUTES.HOME);\n      }).catch(error => {\n        if (error.code === ERROR_CODE_ACCOUNT_EXISTS) {\n          error.message = ERROR_MSG_ACCOUNT_EXISTS;\n        }\n\n        this.setState({\n          error\n        });\n      });\n      event.preventDefault();\n    };\n\n    this.onSubmitTwitter = event => {\n      this.props.firebase.doSignInWithTwitter().then(socialAuthUser => {\n        // Create a user in your Firebase Realtime Database too\n        return this.props.firebase.user(socialAuthUser.user.uid).set({\n          username: socialAuthUser.additionalUserInfo.profile.name,\n          email: socialAuthUser.additionalUserInfo.profile.email,\n          roles: {}\n        });\n      }).then(() => {\n        this.setState({\n          error: null\n        });\n        this.props.history.push(ROUTES.HOME);\n      }).catch(error => {\n        if (error.code === ERROR_CODE_ACCOUNT_EXISTS) {\n          error.message = ERROR_MSG_ACCOUNT_EXISTS;\n        }\n\n        this.setState({\n          error\n        });\n      });\n      event.preventDefault();\n    };\n\n    this.onChange = event => {\n      this.setState({\n        [event.target.name]: event.target.value\n      });\n    };\n\n    this.state = { ...INITIAL_STATE\n    };\n  }\n\n  render() {\n    const {\n      email,\n      password,\n      error,\n      errorGoogle,\n      errorFb,\n      errorTwitter\n    } = this.state;\n    const isInvalid = password === \"\" || email === \"\";\n    return /*#__PURE__*/React.createElement(MDBContainer, {\n      className: \"flex float-right\",\n      fluid: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(MDBRow, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(MDBCol, {\n      md: \"6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(MDBCard, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(MDBCardBody, {\n      className: \"mx-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      className: \"dark-grey-text mb-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 21\n      }\n    }, \"Sign in\"))), /*#__PURE__*/React.createElement(MDBInput, {\n      label: \"Your email\",\n      name: \"email\",\n      group: true,\n      type: \"email\",\n      validate: true,\n      value: email,\n      onChange: this.onChange,\n      error: \"wrong\",\n      success: \"right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(MDBInput, {\n      label: \"Your password\",\n      name: \"password\",\n      group: true,\n      type: \"password\",\n      value: password,\n      onChange: this.onChange,\n      validate: true,\n      containerClass: \"mb-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"font-small blue-text d-flex justify-content-end pb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: ROUTES.PASSWORD_FORGET,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 19\n      }\n    }, \"Forgot Password?\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-center mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(MDBBtn, {\n      type: \"button\",\n      gradient: \"blue\",\n      rounded: true,\n      disabled: isInvalid,\n      onClick: this.onSubmit,\n      className: \"btn-block z-depth-1a\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 19\n      }\n    }, \"Sign in\"), error && /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 29\n      }\n    }, error.message)), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"font-small dark-grey-text text-right d-flex justify-content-center mb-3 pt-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 17\n      }\n    }, \"or Sign in with:\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row my-3 d-flex justify-content-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(MDBBtn, {\n      type: \"button\",\n      color: \"white\",\n      rounded: true,\n      onClick: this.onSubmitFb,\n      className: \"mr-md-3 z-depth-1a\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(MDBIcon, {\n      fab: true,\n      icon: \"facebook-f\",\n      className: \"blue-text text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 21\n      }\n    })), errorFb && /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 31\n      }\n    }, errorFb.message), /*#__PURE__*/React.createElement(MDBBtn, {\n      type: \"button\",\n      color: \"white\",\n      rounded: true,\n      onClick: this.onSubmitTwitter,\n      className: \"mr-md-3 z-depth-1a\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(MDBIcon, {\n      fab: true,\n      icon: \"twitter\",\n      className: \"blue-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 21\n      }\n    })), errorTwitter && /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 36\n      }\n    }, errorTwitter.message), /*#__PURE__*/React.createElement(MDBBtn, {\n      type: \"button\",\n      color: \"white\",\n      rounded: true,\n      onClick: this.onSubmitGoogle,\n      className: \"z-depth-1a\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(MDBIcon, {\n      fab: true,\n      icon: \"google-plus-g\",\n      className: \"blue-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 21\n      }\n    })), errorGoogle && /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 35\n      }\n    }, errorGoogle.message))), /*#__PURE__*/React.createElement(MDBModalFooter, {\n      className: \"mx-5 pt-3 mb-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"font-small grey-text d-flex justify-content-end\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 17\n      }\n    }, \"Not a member?\", /*#__PURE__*/React.createElement(Link, {\n      to: ROUTES.SIGN_UP,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 19\n      }\n    }, \"Sign Up\")))))));\n  }\n\n}\n\nconst SignInForm = compose(withRouter, withFirebase)(SignInFormBase);\nexport default SignInPage;\nexport { SignInForm };","map":{"version":3,"sources":["/home/nicolas/FisheriesWeb/src/components/SignIn/index.js"],"names":["React","Component","withRouter","Link","compose","MDBContainer","MDBRow","MDBCol","MDBCard","MDBCardBody","MDBInput","MDBBtn","MDBIcon","MDBModalFooter","withFirebase","ROUTES","SignInPage","INITIAL_STATE","email","password","error","errorFb","errorGoogle","errorTwitter","ERROR_CODE_ACCOUNT_EXISTS","ERROR_MSG_ACCOUNT_EXISTS","SignInFormBase","constructor","props","onSubmit","event","state","firebase","doSignInWithEmailAndPassword","then","setState","history","push","HOME","catch","preventDefault","onSubmitGoogle","doSignInWithGoogle","socialAuthUser","user","uid","set","username","displayName","roles","code","message","onSubmitFb","doSignInWithFacebook","additionalUserInfo","profile","name","onSubmitTwitter","doSignInWithTwitter","onChange","target","value","render","isInvalid","PASSWORD_FORGET","SIGN_UP","SignInForm"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { withRouter, Link } from \"react-router-dom\";\nimport { compose } from \"recompose\";\nimport {\n  MDBContainer,\n  MDBRow,\n  MDBCol,\n  MDBCard,\n  MDBCardBody,\n  MDBInput,\n  MDBBtn,\n  MDBIcon,\n  MDBModalFooter,\n} from \"mdbreact\";\n\nimport { withFirebase } from \"../Firebase\";\nimport * as ROUTES from \"../../constants/routes\";\n\nconst SignInPage = () => (\n  // <div className=\"d-flex justify-content-start\">\n    <SignInForm />\n  // </div>\n);\n\nconst INITIAL_STATE = {\n  email: \"\",\n  password: \"\",\n  error: null,\n  errorFb: null,\n  errorGoogle: null,\n  errorTwitter: null,\n};\n\nconst ERROR_CODE_ACCOUNT_EXISTS =\n  \"auth/account-exists-with-different-credential\";\n\nconst ERROR_MSG_ACCOUNT_EXISTS = `\n  An account with an E-Mail address to\n  this social account already exists. Try to login from\n  this account instead and associate your social accounts on\n  your personal account page.\n`;\n\nclass SignInFormBase extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = { ...INITIAL_STATE };\n  }\n\n  onSubmit = (event) => {\n    const { email, password } = this.state;\n\n    this.props.firebase\n      .doSignInWithEmailAndPassword(email, password)\n      .then(() => {\n        this.setState({ ...INITIAL_STATE });\n        this.props.history.push(ROUTES.HOME);\n      })\n      .catch((error) => {\n        this.setState({ error });\n      });\n\n    event.preventDefault();\n  };\n\n  onSubmitGoogle = (event) => {\n    this.props.firebase\n      .doSignInWithGoogle()\n      .then((socialAuthUser) => {\n        // Create a user in your Firebase Realtime Database too\n        return this.props.firebase.user(socialAuthUser.user.uid).set({\n          username: socialAuthUser.user.displayName,\n          email: socialAuthUser.user.email,\n          roles: {},\n        });\n      })\n      .then(() => {\n        this.setState({ errorGoogle: null });\n        this.props.history.push(ROUTES.HOME);\n      })\n      .catch((error) => {\n        if (error.code === ERROR_CODE_ACCOUNT_EXISTS) {\n          error.message = ERROR_MSG_ACCOUNT_EXISTS;\n        }\n\n        this.setState({ error });\n      });\n\n    event.preventDefault();\n  };\n\n  onSubmitFb = (event) => {\n    this.props.firebase\n      .doSignInWithFacebook()\n      .then((socialAuthUser) => {\n        // Create a user in your Firebase Realtime Database too\n        return this.props.firebase.user(socialAuthUser.user.uid).set({\n          username: socialAuthUser.additionalUserInfo.profile.name,\n          email: socialAuthUser.additionalUserInfo.profile.email,\n          roles: {},\n        });\n      })\n      .then(() => {\n        this.setState({ error: null });\n        this.props.history.push(ROUTES.HOME);\n      })\n      .catch((error) => {\n        if (error.code === ERROR_CODE_ACCOUNT_EXISTS) {\n          error.message = ERROR_MSG_ACCOUNT_EXISTS;\n        }\n\n        this.setState({ error });\n      });\n\n    event.preventDefault();\n  };\n\n  onSubmitTwitter = (event) => {\n    this.props.firebase\n      .doSignInWithTwitter()\n      .then((socialAuthUser) => {\n        // Create a user in your Firebase Realtime Database too\n        return this.props.firebase.user(socialAuthUser.user.uid).set({\n          username: socialAuthUser.additionalUserInfo.profile.name,\n          email: socialAuthUser.additionalUserInfo.profile.email,\n          roles: {},\n        });\n      })\n      .then(() => {\n        this.setState({ error: null });\n        this.props.history.push(ROUTES.HOME);\n      })\n      .catch((error) => {\n        if (error.code === ERROR_CODE_ACCOUNT_EXISTS) {\n          error.message = ERROR_MSG_ACCOUNT_EXISTS;\n        }\n\n        this.setState({ error });\n      });\n\n    event.preventDefault();\n  };\n\n  onChange = (event) => {\n    this.setState({ [event.target.name]: event.target.value });\n  };\n\n  render() {\n    const {\n      email,\n      password,\n      error,\n      errorGoogle,\n      errorFb,\n      errorTwitter,\n    } = this.state;\n\n    const isInvalid = password === \"\" || email === \"\";\n    return (\n      <MDBContainer className=\"flex float-right\" fluid>\n        <MDBRow>\n          <MDBCol md=\"6\">\n            <MDBCard>\n              <MDBCardBody className=\"mx-4\">\n                <div className=\"text-center\">\n                  <h3 className=\"dark-grey-text mb-5\">\n                    <strong>Sign in</strong>\n                  </h3>\n                </div>\n                <MDBInput\n                  label=\"Your email\"\n                  name=\"email\"\n                  group\n                  type=\"email\"\n                  validate\n                  value={email}\n                  onChange={this.onChange}\n                  error=\"wrong\"\n                  success=\"right\"\n                />\n                <MDBInput\n                  label=\"Your password\"\n                  name=\"password\"\n                  group\n                  type=\"password\"\n                  value={password}\n                  onChange={this.onChange}\n                  validate\n                  containerClass=\"mb-0\"\n                />\n                <p className=\"font-small blue-text d-flex justify-content-end pb-3\">\n                  <Link to={ROUTES.PASSWORD_FORGET}>Forgot Password?</Link>\n                </p>\n                <div className=\"text-center mb-3\">\n                  <MDBBtn\n                    type=\"button\"\n                    gradient=\"blue\"\n                    rounded\n                    disabled={isInvalid}\n                    onClick={this.onSubmit}\n                    className=\"btn-block z-depth-1a\"\n                  >\n                    Sign in\n                  </MDBBtn>\n                  {error && <p>{error.message}</p>}\n                </div>\n                <p className=\"font-small dark-grey-text text-right d-flex justify-content-center mb-3 pt-2\">\n                  or Sign in with:\n                </p>\n                <div className=\"row my-3 d-flex justify-content-center\">\n                  <MDBBtn\n                    type=\"button\"\n                    color=\"white\"\n                    rounded\n                    onClick={this.onSubmitFb}\n                    className=\"mr-md-3 z-depth-1a\"\n                  >\n                    <MDBIcon\n                      fab\n                      icon=\"facebook-f\"\n                      className=\"blue-text text-center\"\n                    />\n                  </MDBBtn>\n                  {errorFb && <p>{errorFb.message}</p>}\n                  <MDBBtn\n                    type=\"button\"\n                    color=\"white\"\n                    rounded\n                    onClick={this.onSubmitTwitter}\n                    className=\"mr-md-3 z-depth-1a\"\n                  >\n                    <MDBIcon fab icon=\"twitter\" className=\"blue-text\" />\n                  </MDBBtn>\n                  {errorTwitter && <p>{errorTwitter.message}</p>}\n                  <MDBBtn\n                    type=\"button\"\n                    color=\"white\"\n                    rounded\n                    onClick={this.onSubmitGoogle}\n                    className=\"z-depth-1a\"\n                  >\n                    <MDBIcon fab icon=\"google-plus-g\" className=\"blue-text\" />\n                  </MDBBtn>\n                  {errorGoogle && <p>{errorGoogle.message}</p>}\n                </div>\n              </MDBCardBody>\n              <MDBModalFooter className=\"mx-5 pt-3 mb-1\">\n                <p className=\"font-small grey-text d-flex justify-content-end\">\n                  Not a member?\n                  <Link to={ROUTES.SIGN_UP}>Sign Up</Link>\n                </p>\n              </MDBModalFooter>\n            </MDBCard>\n          </MDBCol>\n        </MDBRow>\n      </MDBContainer>\n    );\n  }\n}\n\nconst SignInForm = compose(withRouter, withFirebase)(SignInFormBase);\n\nexport default SignInPage;\n\nexport { SignInForm };\n"]},"metadata":{},"sourceType":"module"}