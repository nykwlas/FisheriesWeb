{"ast":null,"code":"var _jsxFileName = \"/home/nicolas/FisheriesWeb/src/components/SignUp/index.js\";\nimport React, { Component } from \"react\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport { MDBContainer, MDBRow, MDBCol, MDBCard, MDBCardBody, MDBInput, MDBModalFooter, MDBBtn } from \"mdbreact\";\nimport { withFirebase } from \"../Firebase\";\nimport * as ROUTES from \"../../constants/routes\";\nimport * as ROLES from \"../../constants/roles\";\n\nconst SignUpPage = () => /*#__PURE__*/React.createElement(\"div\", {\n  style: {\n    paddingBottom: 30,\n    paddingTop: 30\n  },\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 19,\n    columnNumber: 3\n  }\n}, /*#__PURE__*/React.createElement(SignUpForm, {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 20,\n    columnNumber: 5\n  }\n}));\n\nconst INITIAL_STATE = {\n  username: \"\",\n  email: \"\",\n  passwordOne: \"\",\n  passwordTwo: \"\",\n  isAdmin: false,\n  error: null\n};\nconst ERROR_CODE_ACCOUNT_EXISTS = \"auth/email-already-in-use\";\nconst ERROR_MSG_ACCOUNT_EXISTS = `\n  An account with this E-Mail address already exists.\n  Try to login with this account instead. If you think the\n  account is already used from one of the social logins, try\n  to sign in with one of them. Afterward, associate your accounts\n  on your personal account page.\n`;\n\nclass SignUpFormBase extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onSubmit = event => {\n      const {\n        username,\n        email,\n        passwordOne,\n        isAdmin\n      } = this.state;\n      const roles = {};\n\n      if (isAdmin) {\n        roles[ROLES.ADMIN] = ROLES.ADMIN;\n      }\n\n      this.props.firebase.doCreateUserWithEmailAndPassword(email, passwordOne).then(authUser => {\n        // Create a user in your Firebase realtime database\n        return this.props.firebase.user(authUser.user.uid).set({\n          username,\n          email,\n          roles\n        });\n      }).then(() => {\n        return this.props.firebase.doSendEmailVerification();\n      }).then(() => {\n        this.setState({ ...INITIAL_STATE\n        });\n        this.props.history.push(ROUTES.HOME);\n      }).catch(error => {\n        if (error.code === ERROR_CODE_ACCOUNT_EXISTS) {\n          error.message = ERROR_MSG_ACCOUNT_EXISTS;\n        }\n\n        this.setState({\n          error\n        });\n      });\n      event.preventDefault();\n    };\n\n    this.onChange = event => {\n      this.setState({\n        [event.target.name]: event.target.value\n      });\n    };\n\n    this.onChangeCheckbox = event => {\n      this.setState({\n        [event.target.name]: event.target.checked\n      });\n    };\n\n    this.state = { ...INITIAL_STATE\n    };\n  }\n\n  render() {\n    const {\n      username,\n      email,\n      passwordOne,\n      passwordTwo,\n      isAdmin,\n      error\n    } = this.state;\n    const isInvalid = passwordOne !== passwordTwo || passwordOne === \"\" || email === \"\" || username === \"\";\n    return /*#__PURE__*/React.createElement(MDBContainer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(MDBRow, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(MDBCol, {\n      md: \"3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(MDBCol, {\n      md: \"6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(MDBCard, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(MDBCardBody, {\n      className: \"mx-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      className: \"dark-grey-text mb-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 21\n      }\n    }, \"Sign up\"))), /*#__PURE__*/React.createElement(MDBInput, {\n      name: \"username\",\n      value: username,\n      onChange: this.onChange,\n      group: true,\n      type: \"text\",\n      validate: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(MDBInput, {\n      name: \"email\",\n      value: email,\n      onChange: this.onChange,\n      group: true,\n      type: \"text\",\n      validate: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(MDBInput, {\n      name: \"passwordOne\",\n      value: passwordOne,\n      onChange: this.onChange,\n      label: \"Your password\",\n      group: true,\n      type: \"password\",\n      validate: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(MDBInput, {\n      name: \"passwordTwo\",\n      value: passwordTwo,\n      onChange: this.onChange,\n      label: \"Confirm your password\",\n      group: true,\n      type: \"password\",\n      validate: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"md-form pb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-check my-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(MDBInput, {\n      label: /*#__PURE__*/React.createElement(React.Fragment, null, \"Accept\", \" \", /*#__PURE__*/React.createElement(\"a\", {\n        href: \"!#\",\n        className: \"blue-text\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 27\n        }\n      }, \"the Terms and Conditions\")),\n      type: \"checkbox\",\n      id: \"checkbox1\",\n      labelClass: \"white-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 21\n      }\n    }))), /*#__PURE__*/React.createElement(MDBRow, {\n      className: \"d-flex align-items-center mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(MDBCol, {\n      md: \"12\",\n      className: \"text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(MDBBtn, {\n      type: \"button\",\n      gradient: \"blue\",\n      rounded: true,\n      disabled: isInvalid,\n      onClick: this.onSubmit,\n      className: \"btn-block z-depth-1a\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 21\n      }\n    }, \"Sgin Up\"), error && /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 31\n      }\n    }, error.message)))), /*#__PURE__*/React.createElement(MDBModalFooter, {\n      className: \"mx-5 pt-3 mb-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"font-small grey-text d-flex justify-content-end\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 15\n      }\n    }, \"Have an account?\", /*#__PURE__*/React.createElement(Link, {\n      to: ROUTES.SIGN_IN,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 17\n      }\n    }, \"Sign In\"))))), /*#__PURE__*/React.createElement(MDBCol, {\n      md: \"3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 11\n      }\n    }))) // <form onSubmit={this.onSubmit}>\n    //   <input\n    //     name=\"username\"\n    //     value={username}\n    //     onChange={this.onChange}\n    //     type=\"text\"\n    //     placeholder=\"Full Name\"\n    //   />\n    //   <input\n    //     name=\"email\"\n    //     value={email}\n    //     onChange={this.onChange}\n    //     type=\"text\"\n    //     placeholder=\"Email Address\"\n    //   />\n    //   <input\n    //     name=\"passwordOne\"\n    //     value={passwordOne}\n    //     onChange={this.onChange}\n    //     type=\"password\"\n    //     placeholder=\"Password\"\n    //   />\n    //   <input\n    //     name=\"passwordTwo\"\n    //     value={passwordTwo}\n    //     onChange={this.onChange}\n    //     type=\"password\"\n    //     placeholder=\"Confirm Password\"\n    //   />\n    //   <label>\n    //     Admin:\n    //     <input\n    //       name=\"isAdmin\"\n    //       type=\"checkbox\"\n    //       checked={isAdmin}\n    //       onChange={this.onChangeCheckbox}\n    //     />\n    //   </label>\n    //   <button disabled={isInvalid} type=\"submit\">\n    //     Sign Up\n    //   </button>\n    //   {error && <p>{error.message}</p>}\n    // </form>\n    ;\n  }\n\n}\n\nconst SignUpLink = () => /*#__PURE__*/React.createElement(\"p\", {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 250,\n    columnNumber: 3\n  }\n}, \"Don't have an account? \", /*#__PURE__*/React.createElement(Link, {\n  to: ROUTES.SIGN_UP,\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 251,\n    columnNumber: 28\n  }\n}, \"Sign Up\"));\n\nconst SignUpForm = withRouter(withFirebase(SignUpFormBase));\nexport default SignUpPage;\nexport { SignUpForm, SignUpLink };","map":{"version":3,"sources":["/home/nicolas/FisheriesWeb/src/components/SignUp/index.js"],"names":["React","Component","Link","withRouter","MDBContainer","MDBRow","MDBCol","MDBCard","MDBCardBody","MDBInput","MDBModalFooter","MDBBtn","withFirebase","ROUTES","ROLES","SignUpPage","paddingBottom","paddingTop","INITIAL_STATE","username","email","passwordOne","passwordTwo","isAdmin","error","ERROR_CODE_ACCOUNT_EXISTS","ERROR_MSG_ACCOUNT_EXISTS","SignUpFormBase","constructor","props","onSubmit","event","state","roles","ADMIN","firebase","doCreateUserWithEmailAndPassword","then","authUser","user","uid","set","doSendEmailVerification","setState","history","push","HOME","catch","code","message","preventDefault","onChange","target","name","value","onChangeCheckbox","checked","render","isInvalid","SIGN_IN","SignUpLink","SIGN_UP","SignUpForm"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Link, withRouter } from \"react-router-dom\";\n\nimport {\n  MDBContainer,\n  MDBRow,\n  MDBCol,\n  MDBCard,\n  MDBCardBody,\n  MDBInput,\n  MDBModalFooter,\n  MDBBtn,\n} from \"mdbreact\";\nimport { withFirebase } from \"../Firebase\";\nimport * as ROUTES from \"../../constants/routes\";\nimport * as ROLES from \"../../constants/roles\";\n\nconst SignUpPage = () => (\n  <div style={{ paddingBottom: 30, paddingTop: 30 }}>\n    <SignUpForm />\n  </div>\n);\n\nconst INITIAL_STATE = {\n  username: \"\",\n  email: \"\",\n  passwordOne: \"\",\n  passwordTwo: \"\",\n  isAdmin: false,\n  error: null,\n};\n\nconst ERROR_CODE_ACCOUNT_EXISTS = \"auth/email-already-in-use\";\n\nconst ERROR_MSG_ACCOUNT_EXISTS = `\n  An account with this E-Mail address already exists.\n  Try to login with this account instead. If you think the\n  account is already used from one of the social logins, try\n  to sign in with one of them. Afterward, associate your accounts\n  on your personal account page.\n`;\n\nclass SignUpFormBase extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = { ...INITIAL_STATE };\n  }\n\n  onSubmit = (event) => {\n    const { username, email, passwordOne, isAdmin } = this.state;\n    const roles = {};\n\n    if (isAdmin) {\n      roles[ROLES.ADMIN] = ROLES.ADMIN;\n    }\n\n    this.props.firebase\n      .doCreateUserWithEmailAndPassword(email, passwordOne)\n      .then((authUser) => {\n        // Create a user in your Firebase realtime database\n        return this.props.firebase.user(authUser.user.uid).set({\n          username,\n          email,\n          roles,\n        });\n      })\n      .then(() => {\n        return this.props.firebase.doSendEmailVerification();\n      })\n      .then(() => {\n        this.setState({ ...INITIAL_STATE });\n        this.props.history.push(ROUTES.HOME);\n      })\n      .catch((error) => {\n        if (error.code === ERROR_CODE_ACCOUNT_EXISTS) {\n          error.message = ERROR_MSG_ACCOUNT_EXISTS;\n        }\n\n        this.setState({ error });\n      });\n\n    event.preventDefault();\n  };\n\n  onChange = (event) => {\n    this.setState({ [event.target.name]: event.target.value });\n  };\n\n  onChangeCheckbox = (event) => {\n    this.setState({ [event.target.name]: event.target.checked });\n  };\n\n  render() {\n    const {\n      username,\n      email,\n      passwordOne,\n      passwordTwo,\n      isAdmin,\n      error,\n    } = this.state;\n\n    const isInvalid =\n      passwordOne !== passwordTwo ||\n      passwordOne === \"\" ||\n      email === \"\" ||\n      username === \"\";\n\n    return (\n      <MDBContainer>\n        <MDBRow>\n          <MDBCol md=\"3\"></MDBCol>\n          <MDBCol md=\"6\">\n            <MDBCard>\n              <MDBCardBody className=\"mx-4\">\n                <div className=\"text-center\">\n                  <h3 className=\"dark-grey-text mb-5\">\n                    <strong>Sign up</strong>\n                  </h3>\n                </div>\n                <MDBInput\n                  name=\"username\"\n                  value={username}\n                  onChange={this.onChange}\n                  group\n                  type=\"text\"\n                  validate\n                />\n                <MDBInput\n                  name=\"email\"\n                  value={email}\n                  onChange={this.onChange}\n                  group\n                  type=\"text\"\n                  validate\n                />\n                <MDBInput\n                  name=\"passwordOne\"\n                  value={passwordOne}\n                  onChange={this.onChange}\n                  label=\"Your password\"\n                  group\n                  type=\"password\"\n                  validate\n                />\n                <MDBInput\n                  name=\"passwordTwo\"\n                  value={passwordTwo}\n                  onChange={this.onChange}\n                  label=\"Confirm your password\"\n                  group\n                  type=\"password\"\n                  validate\n                />\n\n                <div className=\"md-form pb-3\">\n                  <div className=\"form-check my-4\">\n                    <MDBInput\n                      label={\n                        <>\n                          Accept{\" \"}\n                          <a href=\"!#\" className=\"blue-text\">\n                            the Terms and Conditions\n                          </a>\n                        </>\n                      }\n                      type=\"checkbox\"\n                      id='checkbox1'\n                      labelClass='white-text'\n                    />\n                  </div>\n                </div>\n                <MDBRow className=\"d-flex align-items-center mb-4\">\n                  <MDBCol md=\"12\" className=\"text-center\">\n                    <MDBBtn\n                      type=\"button\"\n                      gradient=\"blue\"\n                      rounded\n                      disabled={isInvalid}\n                      onClick={this.onSubmit}\n                      className=\"btn-block z-depth-1a\"\n                    >\n                      Sgin Up\n                    </MDBBtn>\n                    {error && <p>{error.message}</p>}\n                  </MDBCol>\n                </MDBRow>\n              </MDBCardBody>\n              <MDBModalFooter className=\"mx-5 pt-3 mb-1\">\n              <p className=\"font-small grey-text d-flex justify-content-end\">\n                Have an account?\n                <Link to={ROUTES.SIGN_IN}>Sign In</Link>\n              </p>\n            </MDBModalFooter>\n            </MDBCard>\n          </MDBCol>\n          <MDBCol md=\"3\"></MDBCol>\n        </MDBRow>\n      </MDBContainer>\n      // <form onSubmit={this.onSubmit}>\n      //   <input\n      //     name=\"username\"\n      //     value={username}\n      //     onChange={this.onChange}\n      //     type=\"text\"\n      //     placeholder=\"Full Name\"\n      //   />\n      //   <input\n      //     name=\"email\"\n      //     value={email}\n      //     onChange={this.onChange}\n      //     type=\"text\"\n      //     placeholder=\"Email Address\"\n      //   />\n      //   <input\n      //     name=\"passwordOne\"\n      //     value={passwordOne}\n      //     onChange={this.onChange}\n      //     type=\"password\"\n      //     placeholder=\"Password\"\n      //   />\n      //   <input\n      //     name=\"passwordTwo\"\n      //     value={passwordTwo}\n      //     onChange={this.onChange}\n      //     type=\"password\"\n      //     placeholder=\"Confirm Password\"\n      //   />\n      //   <label>\n      //     Admin:\n      //     <input\n      //       name=\"isAdmin\"\n      //       type=\"checkbox\"\n      //       checked={isAdmin}\n      //       onChange={this.onChangeCheckbox}\n      //     />\n      //   </label>\n      //   <button disabled={isInvalid} type=\"submit\">\n      //     Sign Up\n      //   </button>\n\n      //   {error && <p>{error.message}</p>}\n      // </form>\n    );\n  }\n}\n\nconst SignUpLink = () => (\n  <p>\n    Don't have an account? <Link to={ROUTES.SIGN_UP}>Sign Up</Link>\n  </p>\n);\n\nconst SignUpForm = withRouter(withFirebase(SignUpFormBase));\n\nexport default SignUpPage;\n\nexport { SignUpForm, SignUpLink };\n"]},"metadata":{},"sourceType":"module"}