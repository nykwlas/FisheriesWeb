(this.webpackJsonpfisheries=this.webpackJsonpfisheries||[]).push([[0],{58:function(e,t,n){e.exports=n(94)},67:function(e,t,n){},94:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),s=n(21),o=n.n(s),i=n(16);n(67),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(68),n(69),n(70);var l=n(28),c=n(10),u={authUser:null},m=function(e,t){return Object(c.a)({},e,{authUser:t.authUser})};var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_USER_SET":return m(e,t);default:return e}},h=n(18),p={users:null},f=function(e,t){return Object(c.a)({},e,{users:t.users})},b=function(e,t){return Object(c.a)({},e,{users:Object(c.a)({},e.users,Object(h.a)({},t.uid,t.user))})};var E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USERS_SET":return f(e,t);case"USER_SET":return b(e,t);default:return e}},g={messages:null,limit:5},v=function(e,t){return Object(c.a)({},e,{messages:t.messages})},S=function(e,t){return Object(c.a)({},e,{limit:t.limit})};var O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MESSAGES_SET":return v(e,t);case"MESSAGES_LIMIT_SET":return S(e,t);default:return e}},y=Object(l.b)({sessionState:d,userState:E,messageState:O}),j=Object(l.c)(y),w=n(15),k=n(24),C=n(6),U=n(7),M=n(30),x=n(9),T=n(8),I=n(3),A=r.a.createContext(null),P=function(e){return function(t){return r.a.createElement(A.Consumer,null,(function(n){return r.a.createElement(e,Object.assign({},t,{firebase:n}))}))}},N=A,L=n(23),D=n.n(L),W=(n(89),n(91),{apiKey:" AIzaSyAS75DYoT6jkHCC4lixCd0ECE3-Hx5ExLs",authDomain:"fisheries-2c0cb.firebaseapp.com",databaseURL:"https://fisheries-2c0cb.firebaseio.com/",projectId:"fisheries-2c0cb",storageBucket:"gs://fisheries-2c0cb.appspot.com",messagingSenderId:"712940355681",appId:"1:712940355681:web:e4d035dd7dbd4781c62a20"}),R=function e(){var t=this;Object(C.a)(this,e),this.doCreateUserWithEmailAndPassword=function(e,n){return t.auth.createUserWithEmailAndPassword(e,n)},this.doSignInWithEmailAndPassword=function(e,n){return t.auth.signInWithEmailAndPassword(e,n)},this.doSignInWithGoogle=function(){return t.auth.signInWithPopup(t.googleProvider)},this.doSignInWithFacebook=function(){return t.auth.signInWithPopup(t.facebookProvider)},this.doSignInWithTwitter=function(){return t.auth.signInWithPopup(t.twitterProvider)},this.doSignOut=function(){return t.auth.signOut()},this.doPasswordReset=function(e){return t.auth.sendPasswordResetEmail(e)},this.doSendEmailVerification=function(){return t.auth.currentUser.sendEmailVerification({url:"http://localhost:3000"})},this.doPasswordUpdate=function(e){return t.auth.currentUser.updatePassword(e)},this.onAuthUserListener=function(e,n){return t.auth.onAuthStateChanged((function(a){a?t.user(a.uid).once("value").then((function(t){var n=t.val();n.roles||(n.roles={}),a=Object(c.a)({uid:a.uid,email:a.email,emailVerified:a.emailVerified,providerData:a.providerData},n),e(a)})):n()}))},this.user=function(e){return t.db.ref("users/".concat(e))},this.users=function(){return t.db.ref("users")},this.message=function(e){return t.db.ref("messages/".concat(e))},this.messages=function(){return t.db.ref("messages")},D.a.initializeApp(W),this.serverValue=D.a.database.ServerValue,this.emailAuthProvider=D.a.auth.EmailAuthProvider,this.auth=D.a.auth(),this.db=D.a.database(),this.googleProvider=new D.a.auth.GoogleAuthProvider,this.facebookProvider=new D.a.auth.FacebookAuthProvider,this.twitterProvider=new D.a.auth.TwitterAuthProvider},F=P((function(e){var t=e.firebase;return r.a.createElement(I.b,{size:"sm",onClick:t.doSignOut},"Sign Out")})),V="/terms-cond",_="/home",G=function(e){Object(x.a)(n,e);var t=Object(T.a)(n);function n(e){var a;return Object(C.a)(this,n),(a=t.call(this,e)).state={collapse:!1,isWideEnough:!1},a.onClick=a.onClick.bind(Object(M.a)(a)),a}return Object(U.a)(n,[{key:"onClick",value:function(){this.setState({collapse:!this.state.collapse})}},{key:"render",value:function(){return r.a.createElement(I.n,{color:"blue",dark:!0,expand:"md"},r.a.createElement(I.g,null,r.a.createElement(I.o,{href:"/"},r.a.createElement("strong",null,"Fisheries")),r.a.createElement(I.q,{onClick:this.onClick}),r.a.createElement(I.f,{isOpen:this.state.collapse,navbar:!0},r.a.createElement(I.p,{right:!0},r.a.createElement(I.l,null,r.a.createElement(I.m,{to:"/"},"Home")),r.a.createElement(I.l,null,r.a.createElement(I.m,{to:"/account"},"Account")),!!this.props.authUser.roles.ADMIN&&r.a.createElement(I.l,null,r.a.createElement(I.m,{to:"/admin"},"Admin")),r.a.createElement(I.l,null,r.a.createElement(F,null))))))}}]),n}(r.a.Component),H=function(e){Object(x.a)(n,e);var t=Object(T.a)(n);function n(e){var a;return Object(C.a)(this,n),(a=t.call(this,e)).state={collapse:!1,isWideEnough:!1},a.onClick=a.onClick.bind(Object(M.a)(a)),a}return Object(U.a)(n,[{key:"onClick",value:function(){this.setState({collapse:!this.state.collapse})}},{key:"render",value:function(){return r.a.createElement(I.n,{color:"blue",dark:!0,expand:"md"},r.a.createElement(I.g,null,r.a.createElement(I.o,{href:"/"},r.a.createElement("strong",null,"Fisheries")),r.a.createElement(I.q,{onClick:this.onClick}),r.a.createElement(I.f,{isOpen:this.state.collapse,navbar:!0},r.a.createElement(I.p,{right:!0},r.a.createElement(I.l,null,r.a.createElement(I.m,{to:"/"},"Home")),r.a.createElement(I.l,null,r.a.createElement(I.m,{to:"/signin"},"Sign In")),r.a.createElement(I.l,null,r.a.createElement(I.m,{to:"/signup"},"Sign Up"))))))}}]),n}(r.a.Component),z=Object(i.b)((function(e){return{authUser:e.sessionState.authUser}}))((function(e){var t=e.authUser;return t?r.a.createElement(G,{authUser:t}):r.a.createElement(H,null)})),B=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Landing"))},q={username:"",email:"",passwordOne:"",passwordTwo:"",isAdmin:!1,acceptTerms:!1,error:null},J=function(e){Object(x.a)(n,e);var t=Object(T.a)(n);function n(e){var a;return Object(C.a)(this,n),(a=t.call(this,e)).onSubmit=function(e){var t=a.state,n=t.username,r=t.email,s=t.passwordOne,o=t.isAdmin,i={};o&&(i.ADMIN="ADMIN"),a.props.firebase.doCreateUserWithEmailAndPassword(r,s).then((function(e){return a.props.firebase.user(e.user.uid).set({username:n,email:r,roles:i})})).then((function(){return a.props.firebase.doSendEmailVerification()})).then((function(){a.setState(Object(c.a)({},q)),a.props.history.push(_)})).catch((function(e){"auth/email-already-in-use"===e.code&&(e.message="\n  An account with this E-Mail address already exists.\n  Try to login with this account instead. If you think the\n  account is already used from one of the social logins, try\n  to sign in with one of them. Afterward, associate your accounts\n  on your personal account page.\n"),a.setState({error:e})})),e.preventDefault()},a.onChange=function(e){a.setState(Object(h.a)({},e.target.name,e.target.value))},a.onChangeCheckbox=function(e){a.setState(Object(h.a)({},e.target.name,e.target.checked))},a.state=Object(c.a)({},q),a}return Object(U.a)(n,[{key:"render",value:function(){var e=this.state,t=e.username,n=e.email,a=e.passwordOne,s=e.passwordTwo,o=e.isAdmin,i=e.acceptTerms,l=e.error,c=a!==s||""===a||""===n||""===t||!1===i;return r.a.createElement(I.g,null,r.a.createElement(I.t,null,r.a.createElement(I.e,{md:"3"}),r.a.createElement(I.e,{md:"6"},r.a.createElement(I.c,null,r.a.createElement(I.d,{className:"mx-4"},r.a.createElement("div",{className:"text-center"},r.a.createElement("h3",{className:"dark-grey-text mb-5"},r.a.createElement("strong",null,"Sign up"))),r.a.createElement(I.j,{name:"username",label:"Enter your username",value:t,onChange:this.onChange,group:!0,type:"text",validate:!0}),r.a.createElement(I.j,{name:"email",label:"Enter your email",value:n,onChange:this.onChange,group:!0,type:"email",validate:!0}),r.a.createElement(I.j,{name:"passwordOne",value:a,onChange:this.onChange,label:"Enter your password",group:!0,type:"password",validate:!0}),r.a.createElement(I.j,{name:"passwordTwo",value:s,onChange:this.onChange,label:"Confirm your password",group:!0,type:"password",validate:!0}),r.a.createElement("div",{className:"custom-control custom-checkbox pl-3 m-3"},r.a.createElement("input",{className:"custom-control-input",type:"checkbox",name:"isAdmin",onChange:this.onChangeCheckbox,value:o,id:"invalidCheck1",required:!0}),r.a.createElement("label",{className:"custom-control-label",htmlFor:"invalidCheck1"},"Check for an admin account")),r.a.createElement("div",{className:"custom-control custom-checkbox pl-3 m-3"},r.a.createElement("input",{className:"custom-control-input",type:"checkbox",name:"acceptTerms",onChange:this.onChangeCheckbox,value:i,id:"invalidCheck2",required:!0}),r.a.createElement("label",{className:"custom-control-label",htmlFor:"invalidCheck2"},r.a.createElement(r.a.Fragment,null,"Accept\xa0",r.a.createElement(w.b,{to:V},"the terms and conditions")))),r.a.createElement(I.t,{className:"d-flex align-items-center mb-4"},r.a.createElement(I.e,{md:"12",className:"text-center"},r.a.createElement(I.b,{type:"button",gradient:"blue",rounded:!0,disabled:c,onClick:this.onSubmit,className:"btn-block z-depth-1a"},"Sgin Up"),l&&r.a.createElement("p",null,l.message)))),r.a.createElement(I.k,{className:"mx-5 pt-3 mb-1"},r.a.createElement("p",{className:"font-small grey-text d-flex justify-content-end"},"Have an account?",r.a.createElement(w.b,{to:"/signin"},"Sign In"))))),r.a.createElement(I.e,{md:"3"})))}}]),n}(a.Component),Y=Object(k.f)(P(J)),K=function(){return r.a.createElement("div",{style:{paddingBottom:30,paddingTop:30}},r.a.createElement(Y,null))},$=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Terms and Conditions"))},Q=n(14),X={email:"",password:"",error:null,errorFb:null,errorGoogle:null,errorTwitter:null},Z="\n  An account with an E-Mail address to\n  this social account already exists. Try to login from\n  this account instead and associate your social accounts on\n  your personal account page.\n",ee=function(e){Object(x.a)(n,e);var t=Object(T.a)(n);function n(e){var a;return Object(C.a)(this,n),(a=t.call(this,e)).onSubmit=function(e){var t=a.state,n=t.email,r=t.password;a.props.firebase.doSignInWithEmailAndPassword(n,r).then((function(){a.setState(Object(c.a)({},X)),a.props.history.push(_)})).catch((function(e){a.setState({error:e})})),e.preventDefault()},a.onSubmitGoogle=function(e){a.props.firebase.doSignInWithGoogle().then((function(e){return a.props.firebase.user(e.user.uid).set({username:e.user.displayName,email:e.user.email,roles:{}})})).then((function(){a.setState({errorGoogle:null}),a.props.history.push(_)})).catch((function(e){"auth/account-exists-with-different-credential"===e.code&&(e.message=Z),a.setState({error:e})})),e.preventDefault()},a.onSubmitFb=function(e){a.props.firebase.doSignInWithFacebook().then((function(e){return a.props.firebase.user(e.user.uid).set({username:e.additionalUserInfo.profile.name,email:e.additionalUserInfo.profile.email,roles:{}})})).then((function(){a.setState({error:null}),a.props.history.push(_)})).catch((function(e){"auth/account-exists-with-different-credential"===e.code&&(e.message=Z),a.setState({error:e})})),e.preventDefault()},a.onSubmitTwitter=function(e){a.props.firebase.doSignInWithTwitter().then((function(e){return a.props.firebase.user(e.user.uid).set({username:e.additionalUserInfo.profile.name,email:e.additionalUserInfo.profile.email,roles:{}})})).then((function(){a.setState({error:null}),a.props.history.push(_)})).catch((function(e){"auth/account-exists-with-different-credential"===e.code&&(e.message=Z),a.setState({error:e})})),e.preventDefault()},a.onChange=function(e){a.setState(Object(h.a)({},e.target.name,e.target.value))},a.state=Object(c.a)({},X),a}return Object(U.a)(n,[{key:"render",value:function(){var e=this.state,t=e.email,n=e.password,a=e.error,s=e.errorGoogle,o=e.errorFb,i=e.errorTwitter,l=""===n||""===t;return r.a.createElement(I.g,null,r.a.createElement(I.t,null,r.a.createElement(I.e,{md:"3"}),r.a.createElement(I.e,{md:"6"},r.a.createElement(I.c,null,r.a.createElement(I.d,{className:"mx-4"},r.a.createElement("div",{className:"text-center"},r.a.createElement("h3",{className:"dark-grey-text mb-5"},r.a.createElement("strong",null,"Sign in"))),r.a.createElement(I.j,{label:"Your email",name:"email",group:!0,type:"email",validate:!0,value:t,onChange:this.onChange,error:"wrong",success:"right"}),r.a.createElement(I.j,{label:"Your password",name:"password",group:!0,type:"password",value:n,onChange:this.onChange,validate:!0,containerClass:"mb-0"}),r.a.createElement("p",{className:"font-small blue-text d-flex justify-content-end pb-3"},r.a.createElement(w.b,{to:"/pw-forget"},"Forgot Password?")),r.a.createElement("div",{className:"text-center mb-3"},r.a.createElement(I.b,{type:"button",gradient:"blue",rounded:!0,disabled:l,onClick:this.onSubmit,className:"btn-block z-depth-1a"},"Sign in"),a&&r.a.createElement("p",null,a.message)),r.a.createElement("p",{className:"font-small dark-grey-text text-right d-flex justify-content-center mb-3 pt-2"},"or Sign in with:"),r.a.createElement("div",{className:"row my-3 d-flex justify-content-center"},r.a.createElement(I.b,{type:"button",color:"white",rounded:!0,onClick:this.onSubmitFb,className:"mr-md-3 z-depth-1a"},r.a.createElement(I.h,{fab:!0,icon:"facebook-f",className:"blue-text text-center"})),o&&r.a.createElement("p",null,o.message),r.a.createElement(I.b,{type:"button",color:"white",rounded:!0,onClick:this.onSubmitTwitter,className:"mr-md-3 z-depth-1a"},r.a.createElement(I.h,{fab:!0,icon:"twitter",className:"blue-text"})),i&&r.a.createElement("p",null,i.message),r.a.createElement(I.b,{type:"button",color:"white",rounded:!0,onClick:this.onSubmitGoogle,className:"z-depth-1a"},r.a.createElement(I.h,{fab:!0,icon:"google-plus-g",className:"blue-text"})),s&&r.a.createElement("p",null,s.message))),r.a.createElement(I.k,{className:"mx-5 pt-3 mb-1"},r.a.createElement("p",{className:"font-small grey-text d-flex justify-content-end"},"Not a member?",r.a.createElement(w.b,{to:"/signup"},"Sign Up"))))),r.a.createElement(I.e,{md:"3"})))}}]),n}(a.Component),te=Object(Q.a)(k.f,P)(ee),ne=function(){return r.a.createElement("div",{style:{paddingBottom:30,paddingTop:30}},r.a.createElement(te,null))},ae={email:"",error:null},re=function(e){Object(x.a)(n,e);var t=Object(T.a)(n);function n(e){var a;return Object(C.a)(this,n),(a=t.call(this,e)).onSubmit=function(e){var t=a.state.email;a.props.firebase.doPasswordReset(t).then((function(){a.setState(Object(c.a)({},ae))})).catch((function(e){a.setState({error:e})})),e.preventDefault()},a.onChange=function(e){a.setState(Object(h.a)({},e.target.name,e.target.value))},a.state=Object(c.a)({},ae),a}return Object(U.a)(n,[{key:"render",value:function(){var e=this.state,t=e.email,n=e.error,a=""===t;return r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("input",{name:"email",value:this.state.email,onChange:this.onChange,type:"text",placeholder:"Email Address"}),r.a.createElement("button",{disabled:a,type:"submit"},"Reset My Password"),n&&r.a.createElement("p",null,n.message))}}]),n}(a.Component),se=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"PasswordForget"),r.a.createElement(oe,null))},oe=P(re),ie=function(e){var t=function(t){Object(x.a)(a,t);var n=Object(T.a)(a);function a(e){var t;return Object(C.a)(this,a),(t=n.call(this,e)).props.onSetAuthUser(JSON.parse(localStorage.getItem("authUser"))),t}return Object(U.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.listener=this.props.firebase.onAuthUserListener((function(t){localStorage.setItem("authUser",JSON.stringify(t)),e.props.onSetAuthUser(t)}),(function(){localStorage.removeItem("authUser"),e.props.onSetAuthUser(null)}))}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"render",value:function(){return r.a.createElement(e,this.props)}}]),a}(r.a.Component);return Object(Q.a)(P,Object(i.b)(null,(function(e){return{onSetAuthUser:function(t){return e({type:"AUTH_USER_SET",authUser:t})}}})))(t)},le=function(e){return function(t){var n=function(n){Object(x.a)(s,n);var a=Object(T.a)(s);function s(){return Object(C.a)(this,s),a.apply(this,arguments)}return Object(U.a)(s,[{key:"componentDidMount",value:function(){var t=this;this.listener=this.props.firebase.onAuthUserListener((function(n){e(n)||t.props.history.push("/signin")}),(function(){return t.props.history.push("/signin")}))}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"render",value:function(){return e(this.props.authUser)?r.a.createElement(t,this.props):null}}]),s}(r.a.Component);return Object(Q.a)(k.f,P,Object(i.b)((function(e){return{authUser:e.sessionState.authUser}})))(n)}},ce=function(e){var t=function(t){Object(x.a)(a,t);var n=Object(T.a)(a);function a(e){var t;return Object(C.a)(this,a),(t=n.call(this,e)).onSendEmailVerification=function(){t.props.firebase.doSendEmailVerification().then((function(){return t.setState({isSent:!0})}))},t.state={isSent:!1},t}return Object(U.a)(a,[{key:"render",value:function(){return(t=this.props.authUser)&&!t.emailVerified&&t.providerData.map((function(e){return e.providerId})).includes("password")?r.a.createElement("div",null,this.state.isSent?r.a.createElement("p",null,"E-Mail confirmation sent: Check you E-Mails (Spam folder included) for a confirmation E-Mail. Refresh this page once you confirmed your E-Mail."):r.a.createElement("p",null,"Verify your E-Mail: Check you E-Mails (Spam folder included) for a confirmation E-Mail or send another confirmation E-Mail."),r.a.createElement("button",{type:"button",onClick:this.onSendEmailVerification,disabled:this.state.isSent},"Send confirmation E-Mail")):r.a.createElement(e,this.props);var t}}]),a}(r.a.Component);return Object(Q.a)(P,Object(i.b)((function(e){return{authUser:e.sessionState.authUser}})))(t)},ue=n(57),me=function(e){Object(x.a)(n,e);var t=Object(T.a)(n);function n(e){var a;return Object(C.a)(this,n),(a=t.call(this,e)).onToggleEditMode=function(){a.setState((function(e){return{editMode:!e.editMode,editText:a.props.message.text}}))},a.onChangeEditText=function(e){a.setState({editText:e.target.value})},a.onSaveEditText=function(){a.props.onEditMessage(a.props.message,a.state.editText),a.setState({editMode:!1})},a.state={editMode:!1,editText:a.props.message.text},a}return Object(U.a)(n,[{key:"render",value:function(){var e=this.props,t=e.authUser,n=e.message,a=e.onRemoveMessage,s=this.state,o=s.editMode,i=s.editText;return r.a.createElement("li",null,o?r.a.createElement("input",{type:"text",value:i,onChange:this.onChangeEditText}):r.a.createElement("span",null,r.a.createElement("strong",null,n.userId)," ",n.text,n.editedAt&&r.a.createElement("span",null,"(Edited)")),t.uid===n.userId&&r.a.createElement("span",null,o?r.a.createElement("span",null,r.a.createElement("button",{onClick:this.onSaveEditText},"Save"),r.a.createElement("button",{onClick:this.onToggleEditMode},"Reset")):r.a.createElement("button",{onClick:this.onToggleEditMode},"Edit"),!o&&r.a.createElement("button",{type:"button",onClick:function(){return a(n.uid)}},"Delete")))}}]),n}(a.Component),de=function(e){var t=e.authUser,n=e.messages,a=e.onEditMessage,s=e.onRemoveMessage;return r.a.createElement("ul",null,n.map((function(e){return r.a.createElement(me,{authUser:t,key:e.uid,message:e,onEditMessage:a,onRemoveMessage:s})})))},he=function(e){Object(x.a)(n,e);var t=Object(T.a)(n);function n(e){var a;return Object(C.a)(this,n),(a=t.call(this,e)).onListenForMessages=function(){a.props.firebase.messages().orderByChild("createdAt").limitToLast(a.props.limit).on("value",(function(e){a.props.onSetMessages(e.val()),a.setState({loading:!1})}))},a.onChangeText=function(e){a.setState({text:e.target.value})},a.onCreateMessage=function(e,t){a.props.firebase.messages().push({text:a.state.text,userId:t.uid,createdAt:a.props.firebase.serverValue.TIMESTAMP}),a.setState({text:""}),e.preventDefault()},a.onEditMessage=function(e,t){e.uid;var n=Object(ue.a)(e,["uid"]);a.props.firebase.message(e.uid).set(Object(c.a)({},n,{text:t,editedAt:a.props.firebase.serverValue.TIMESTAMP}))},a.onRemoveMessage=function(e){a.props.firebase.message(e).remove()},a.onNextPage=function(){a.props.onSetMessagesLimit(a.props.limit+5)},a.state={text:"",loading:!1},a}return Object(U.a)(n,[{key:"componentDidMount",value:function(){this.props.messages.length||this.setState({loading:!0}),this.onListenForMessages()}},{key:"componentDidUpdate",value:function(e){e.limit!==this.props.limit&&this.onListenForMessages()}},{key:"componentWillUnmount",value:function(){this.props.firebase.messages().off()}},{key:"render",value:function(){var e=this,t=this.props.messages,n=this.state,a=n.text,s=n.loading;return r.a.createElement("div",null,!s&&t&&r.a.createElement("button",{type:"button",onClick:this.onNextPage},"More"),s&&r.a.createElement("div",null,"Loading ..."),t&&r.a.createElement(de,{authUser:this.props.authUser,messages:t,onEditMessage:this.onEditMessage,onRemoveMessage:this.onRemoveMessage}),!t&&r.a.createElement("div",null,"There are no messages ..."),r.a.createElement("form",{onSubmit:function(t){return e.onCreateMessage(t,e.props.authUser)}},r.a.createElement("input",{type:"text",value:a,onChange:this.onChangeText}),r.a.createElement("button",{type:"submit"},"Send")))}}]),n}(a.Component),pe=Object(Q.a)(P,Object(i.b)((function(e){return{authUser:e.sessionState.authUser,messages:Object.keys(e.messageState.messages||{}).map((function(t){return Object(c.a)({},e.messageState.messages[t],{uid:t})})),limit:e.messageState.limit}}),(function(e){return{onSetMessages:function(t){return e({type:"MESSAGES_SET",messages:t})},onSetMessagesLimit:function(t){return e({type:"MESSAGES_LIMIT_SET",limit:t})}}})))(he),fe=Object(Q.a)(ce,le((function(e){return!!e})))((function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Home Page"),r.a.createElement("p",null,"The Home Page is accessible by every signed in user."),r.a.createElement(pe,null))})),be={passwordOne:"",passwordTwo:"",error:null},Ee=function(e){Object(x.a)(n,e);var t=Object(T.a)(n);function n(e){var a;return Object(C.a)(this,n),(a=t.call(this,e)).onSubmit=function(e){var t=a.state.passwordOne;a.props.firebase.doPasswordUpdate(t).then((function(){a.setState(Object(c.a)({},be))})).catch((function(e){a.setState({error:e})})),e.preventDefault()},a.onChange=function(e){a.setState(Object(h.a)({},e.target.name,e.target.value))},a.state=Object(c.a)({},be),a}return Object(U.a)(n,[{key:"render",value:function(){var e=this.state,t=e.passwordOne,n=e.passwordTwo,a=e.error,s=t!==n||""===t;return r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("input",{name:"passwordOne",value:t,onChange:this.onChange,type:"password",placeholder:"New Password"}),r.a.createElement("input",{name:"passwordTwo",value:n,onChange:this.onChange,type:"password",placeholder:"Confirm New Password"}),r.a.createElement("button",{disabled:s,type:"submit"},"Reset My Password"),a&&r.a.createElement("p",null,a.message))}}]),n}(a.Component),ge=P(Ee),ve=[{id:"password",provider:null},{id:"google.com",provider:"googleProvider"},{id:"facebook.com",provider:"facebookProvider"},{id:"twitter.com",provider:"twitterProvider"}],Se=function(e){Object(x.a)(n,e);var t=Object(T.a)(n);function n(e){var a;return Object(C.a)(this,n),(a=t.call(this,e)).fetchSignInMethods=function(){a.props.firebase.auth.fetchSignInMethodsForEmail(a.props.authUser.email).then((function(e){return a.setState({activeSignInMethods:e,error:null})})).catch((function(e){return a.setState({error:e})}))},a.onSocialLoginLink=function(e){a.props.firebase.auth.currentUser.linkWithPopup(a.props.firebase[e]).then(a.fetchSignInMethods).catch((function(e){return a.setState({error:e})}))},a.onDefaultLoginLink=function(e){var t=a.props.firebase.emailAuthProvider.credential(a.props.authUser.email,e);a.props.firebase.auth.currentUser.linkAndRetrieveDataWithCredential(t).then(a.fetchSignInMethods).catch((function(e){return a.setState({error:e})}))},a.onUnlink=function(e){a.props.firebase.auth.currentUser.unlink(e).then(a.fetchSignInMethods).catch((function(e){return a.setState({error:e})}))},a.state={activeSignInMethods:[],error:null},a}return Object(U.a)(n,[{key:"componentDidMount",value:function(){this.fetchSignInMethods()}},{key:"render",value:function(){var e=this,t=this.state,n=t.activeSignInMethods,a=t.error;return r.a.createElement("div",null,"Sign In Methods:",r.a.createElement("ul",null,ve.map((function(t){var a=1===n.length,s=n.includes(t.id);return r.a.createElement("li",{key:t.id},"password"===t.id?r.a.createElement(ye,{onlyOneLeft:a,isEnabled:s,signInMethod:t,onLink:e.onDefaultLoginLink,onUnlink:e.onUnlink}):r.a.createElement(Oe,{onlyOneLeft:a,isEnabled:s,signInMethod:t,onLink:e.onSocialLoginLink,onUnlink:e.onUnlink}))}))),a&&a.message)}}]),n}(a.Component),Oe=function(e){var t=e.onlyOneLeft,n=e.isEnabled,a=e.signInMethod,s=e.onLink,o=e.onUnlink;return n?r.a.createElement("button",{type:"button",onClick:function(){return o(a.id)},disabled:t},"Deactivate ",a.id):r.a.createElement("button",{type:"button",onClick:function(){return s(a.provider)}},"Link ",a.id)},ye=function(e){Object(x.a)(n,e);var t=Object(T.a)(n);function n(e){var a;return Object(C.a)(this,n),(a=t.call(this,e)).onSubmit=function(e){e.preventDefault(),a.props.onLink(a.state.passwordOne),a.setState({passwordOne:"",passwordTwo:""})},a.onChange=function(e){a.setState(Object(h.a)({},e.target.name,e.target.value))},a.state={passwordOne:"",passwordTwo:""},a}return Object(U.a)(n,[{key:"render",value:function(){var e=this.props,t=e.onlyOneLeft,n=e.isEnabled,a=e.signInMethod,s=e.onUnlink,o=this.state,i=o.passwordOne,l=o.passwordTwo,c=i!==l||""===i;return n?r.a.createElement("button",{type:"button",onClick:function(){return s(a.id)},disabled:t},"Deactivate ",a.id):r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("input",{name:"passwordOne",value:i,onChange:this.onChange,type:"password",placeholder:"New Password"}),r.a.createElement("input",{name:"passwordTwo",value:l,onChange:this.onChange,type:"password",placeholder:"Confirm New Password"}),r.a.createElement("button",{disabled:c,type:"submit"},"Link ",a.id))}}]),n}(a.Component),je=P(Se),we=Object(Q.a)(Object(i.b)((function(e){return{authUser:e.sessionState.authUser}})),ce,le((function(e){return!!e})))((function(e){var t=e.authUser;return r.a.createElement("div",null,r.a.createElement("h1",null,"Account: ",t.email),r.a.createElement(oe,null),r.a.createElement(ge,null),r.a.createElement(je,{authUser:t}))})),ke=function(e){Object(x.a)(n,e);var t=Object(T.a)(n);function n(e){var a;return Object(C.a)(this,n),(a=t.call(this,e)).state={loading:!1},a}return Object(U.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.users.length||this.setState({loading:!0}),this.props.firebase.users().on("value",(function(t){e.props.onSetUsers(t.val()),e.setState({loading:!1})}))}},{key:"componentWillUnmount",value:function(){this.props.firebase.users().off()}},{key:"render",value:function(){var e=this.props.users,t=this.state.loading;return r.a.createElement("div",null,r.a.createElement("h2",null,"Users"),t&&r.a.createElement("div",null,"Loading ..."),r.a.createElement("ul",null,e.map((function(e){return r.a.createElement("li",{key:e.uid},r.a.createElement("span",null,r.a.createElement("strong",null,"ID:")," ",e.uid),r.a.createElement("span",null,r.a.createElement("strong",null,"E-Mail:")," ",e.email),r.a.createElement("span",null,r.a.createElement("strong",null,"Username:")," ",e.username),r.a.createElement("span",null,r.a.createElement(w.b,{to:"".concat("/admin","/").concat(e.uid)},"Details")))}))))}}]),n}(a.Component),Ce=Object(Q.a)(P,Object(i.b)((function(e){return{users:Object.keys(e.userState.users||{}).map((function(t){return Object(c.a)({},e.userState.users[t],{uid:t})}))}}),(function(e){return{onSetUsers:function(t){return e({type:"USERS_SET",users:t})}}})))(ke),Ue=function(e){Object(x.a)(n,e);var t=Object(T.a)(n);function n(e){var a;return Object(C.a)(this,n),(a=t.call(this,e)).onSendPasswordResetEmail=function(){a.props.firebase.doPasswordReset(a.props.user.email)},a.state={loading:!1},a}return Object(U.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.user||this.setState({loading:!0}),this.props.firebase.user(this.props.match.params.id).on("value",(function(t){e.props.onSetUser(t.val(),e.props.match.params.id),e.setState({loading:!1})}))}},{key:"componentWillUnmount",value:function(){this.props.firebase.user(this.props.match.params.id).off()}},{key:"render",value:function(){var e=this.props.user,t=this.state.loading;return r.a.createElement("div",null,r.a.createElement("h2",null,"User (",this.props.match.params.id,")"),t&&r.a.createElement("div",null,"Loading ..."),e&&r.a.createElement("div",null,r.a.createElement("span",null,r.a.createElement("strong",null,"ID:")," ",e.uid),r.a.createElement("span",null,r.a.createElement("strong",null,"E-Mail:")," ",e.email),r.a.createElement("span",null,r.a.createElement("strong",null,"Username:")," ",e.username),r.a.createElement("span",null,r.a.createElement("button",{type:"button",onClick:this.onSendPasswordResetEmail},"Send Password Reset"))))}}]),n}(a.Component),Me=Object(Q.a)(P,Object(i.b)((function(e,t){return{user:(e.userState.users||{})[t.match.params.id]}}),(function(e){return{onSetUser:function(t,n){return e({type:"USER_SET",user:t,uid:n})}}})))(Ue),xe=Object(Q.a)(ce,le((function(e){return e&&!!e.roles.ADMIN})))((function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Admin"),r.a.createElement("p",null,"The Admin Page is accessible by every signed in admin user."),r.a.createElement(k.c,null,r.a.createElement(k.a,{exact:!0,path:"/admin/:id",component:Me}),r.a.createElement(k.a,{exact:!0,path:"/admin",component:Ce})))})),Te=ie((function(){return r.a.createElement("div",null,r.a.createElement(w.a,null,r.a.createElement("div",null,r.a.createElement(z,null),r.a.createElement(k.a,{exact:!0,path:"/",component:B}),r.a.createElement(k.a,{path:"/signup",component:K}),r.a.createElement(k.a,{path:V,component:$}),r.a.createElement(k.a,{path:"/signin",component:ne}),r.a.createElement(k.a,{path:"/pw-forget",component:se}),r.a.createElement(k.a,{path:_,component:fe}),r.a.createElement(k.a,{path:"/account",component:we}),r.a.createElement(k.a,{path:"/admin",component:xe}))))}));o.a.render(r.a.createElement(i.a,{store:j},r.a.createElement(N.Provider,{value:new R},r.a.createElement(Te,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[58,1,2]]]);
//# sourceMappingURL=main.74bd0196.chunk.js.map